---
---
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Harness</title>
    
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/layout.css"></link>

    <script src="https://unpkg.com/js-yaml@3.12.0/dist/js-yaml.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@10.0.0/dist/markdown-it.min.js"></script>
    <script src="https://unpkg.com/turndown/dist/turndown.js"></script>    

    <script src="https://unpkg.com/@isomorphic-git/lightning-fs"></script>
    <script src="https://unpkg.com/isomorphic-git@beta"></script>

    <script type="module">
      import { GITEditor  } from '/assets/js/editor.js';

      let editor = new GITEditor('https://github.com/jamesaduncan/osom.guide.git', {
	  corsProxy: 'http://localhost:9999'
      });

      await editor.clone();
      
      window.addEventListener('hashchange', function() { editor.display() }, false);

      editor.display();
    </script>
  </head>

  <body>
    <header>
      <h1>Editor</h1>
    </header>
    <details open="true">
      <summary>Directory listing</summary>
      <section id="listing">
      </section>
    </details>
    <details>
      <summary>Document metadata</summary>
      <section id="metadata">
      </section>
    </details>
    <details class="editor" open="true">
      <summary></summary>
      <section id="editor" contentEditable="true"></section>
    </details>
    <footer>
      <span class="copyright">Copyright 2021 Stance Global Ltd</span>
    </footer>
  </body>
</html>
